# Thread: opencode — Save point

| Field | Value |
| ----- | ----- |
| **Status** | `Active` |
| **Owner** | `codex` |
| **Start Date** | `2025-11-29` |
| **Last Update** | `2025-11-29 18:00 UTC` |
| **Related Work** | `docs/agents/progress-tracking.md`, `ops/threads/TEMPLATE.md` |
| **Links** | (no PR yet) — create branch `opencode-savepoint` and push; include `git rev-parse --short HEAD` after push |

## Objective

Capture an official save point for the `opencode` work so the team has a single source of truth for where to resume. Record what was done, what remains, and concrete recovery steps in case local state or remote branches got lost.

Definition of done:
- A dedicated branch or commit is recorded for the save point.
- This thread contains clear steps to reproduce the repo state and a short checklist of follow-ups.

## Deliverables

- [ ] Create branch `opencode-savepoint` from current working commit and push to remote.
- [ ] Add a short commit message describing the save point and any known missing pieces.
- [ ] Record the commit short-id and any important file paths in this thread.
- [ ] Add follow-up tasks with owners and ETA.

## Summary of current state

- Work in progress: `opencode` feature (editor + persistence / export logic).
- Known touched areas: `src/components/playroom/`, `src/lib/persistence/`, `docs/specs/opencode.md` (if present).
- Unknowns: whether local uncommitted changes exist or if remote branch was accidentally deleted.

## Timeline

- `2025-11-29 18:00 UTC` — Thread created: intention to create a save point and capture recovery steps.
- (future) `YYYY-MM-DD HH:MM TZ` — **Update label**: Branch pushed / commit recorded / blockers noted.

## Recovery & Save instructions (what to run)

If you have local changes and want to create a save point:
1. Check working status:
   - `git status --porcelain`
2. Stash or commit local work:
   - To commit: `git add -A && git commit -m "opencode: save point — WIP"`.
   - To stash: `git stash push -m "opencode savepoint"` (if you prefer a stash).
3. Create a branch for the save point:
   - `git checkout -b opencode-savepoint`
4. Push branch:
   - `git push -u origin opencode-savepoint`
5. Copy the short commit id into this thread (run `git rev-parse --short HEAD`) and paste under **Links**.

If the branch was pushed but seems missing remotely:
- Verify remotes: `git remote -v`
- Fetch and list branches: `git fetch --all && git branch -a | grep opencode`

If you only have a local stash:
- List stashes: `git stash list`
- Apply latest stash to a branch:
  - `git checkout -b opencode-savepoint`
  - `git stash apply stash@{0}`
  - Commit and push (see above).

If you can't find the work locally or remotely:
- Check local reflog to recover: `git reflog` and identify the last commit; create a branch at that ref: `git checkout -b opencode-recover <reflog-ref>` then push.

## Current Risks / Blockers

- Uncommitted local changes that haven't been stashed/committed — risk of loss.
- Remote branch may have been deleted or force-pushed; need to verify remote history.
- Merge conflicts may occur when resuming if base has moved forward.
- Missing or incomplete docs around `opencode` design (create `docs/specs/opencode.md` if it doesn't exist).

## Hand-off Notes / Where to resume

- Primary resume point: branch `opencode-savepoint` (create if missing) or the commit recorded here.
- Files most likely to be touched when resuming:
  - `src/components/playroom/*` — editor UI and controls
  - `src/lib/persistence/*` — save/restore/export logic
  - `tests/playroom/*` — add tests for persistence/export
- Recommended first actions for the next engineer:
  1. Verify branch / commit recorded in **Links**.
  2. Run the app locally and exercise the `opencode` flows (save, export, restore).
  3. Fix any failing tests or runtime errors; open a PR titled `opencode: continue from savepoint`.
  4. Update this thread with PR link and final commit.

## Outcome (fill in when Done)

- Result summary + links to merged PRs, demos, or docs.
- Final commit: `git rev-parse --short HEAD` → paste here.
- PR: link to merged PR.